# ç¤¼è®°

ä¸€ä¸ªç”¨äºè®°å½•å’Œç®¡ç†éšç¤¼è¿˜ç¤¼çš„æ™ºèƒ½ Web åº”ç”¨ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ“ **è®°å½•ç®¡ç†**: æ”¶ç¤¼/é€ç¤¼è®°å½•ï¼Œæ”¯æŒç¼–è¾‘å’Œåˆ é™¤
- ğŸ“– **ç¤¼è–„åŠŸèƒ½**: åŠäº‹æ”¶ç¤¼ç™»è®°ï¼Œå®¾å®¢ç®¡ç†
- ğŸ‘¥ **æ™ºèƒ½è¾“å…¥**: å§“åè”æƒ³ã€è‡ªåŠ¨å¡«å……
- ğŸ“Š **ç»Ÿè®¡åˆ†æ**: å¹´åº¦ç»Ÿè®¡ã€äº‹ç”±åˆ†æ
- ğŸ” **å¯†ç ä¿æŠ¤**: é»˜è®¤å¯†ç  adminï¼Œé¦–æ¬¡ç™»å½•æç¤ºä¿®æ”¹
- ğŸ’¾ **æ•°æ®æŒä¹…åŒ–**: Docker å·æŒ‚è½½ï¼Œæ•°æ®æ°¸ä¹…ä¿å­˜
- ğŸ“± **å“åº”å¼è®¾è®¡**: æ”¯æŒç§»åŠ¨ç«¯è®¿é—®
- ğŸ”„ **æ•°æ®åŒæ­¥**: ç¤¼è–„ä¸è®°å½•åŒå‘åŒæ­¥

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### æ–¹æ¡ˆä¸€ï¼šDocker Compose éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. åˆ›å»º docker-compose.yml

```yaml
version: '3.8'

services:
  renqing-app:
    image: zsw01442/liji:latest
    container_name: liji
    ports:
      - "3000:3000"
    volumes:
      - ./data:/app/data
    environment:
      - NODE_ENV=production
      - PORT=3000
      - DATA_DIR=/app/data
    restart: unless-stopped
```

#### 2. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨å®¹å™¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps
```

#### 3. è®¿é—®åº”ç”¨

æµè§ˆå™¨æ‰“å¼€ï¼š`http://localhost:3000`

é»˜è®¤å¯†ç ï¼š`admin`

---

## ğŸ“‹ ä½¿ç”¨è¯´æ˜

### é¦–æ¬¡ç™»å½•

1. æ‰“å¼€æµè§ˆå™¨è®¿é—®åº”ç”¨åœ°å€
2. è¾“å…¥é»˜è®¤å¯†ç ï¼š`admin`
3. ç™»å½•åä¼šæç¤ºä¿®æ”¹å¯†ç 
4. **å¼ºçƒˆå»ºè®®ç«‹å³ä¿®æ”¹å¯†ç **

### ä¸»è¦åŠŸèƒ½

#### 1. æ·»åŠ è®°å½•
- æ”¶ç¤¼è®°å½•ï¼šè®°å½•åˆ«äººç»™ä½ çš„ç¤¼é‡‘
- é€ç¤¼è®°å½•ï¼šè®°å½•ä½ ç»™åˆ«äººçš„ç¤¼é‡‘
- æ”¯æŒå…³è”ç¤¼è–„ï¼šè‡ªåŠ¨å¡«å……äº‹ç”±å’Œæ—¥æœŸ
- æ™ºèƒ½è”æƒ³ï¼šè¾“å…¥å§“åæ—¶è‡ªåŠ¨æç¤ºå†å²è®°å½•

#### 2. ç¤¼è–„ç®¡ç†
- åˆ›å»ºç¤¼è–„ï¼šè®°å½•è‡ªå·±åŠäº‹æ—¶çš„æ”¶ç¤¼æƒ…å†µ
- æ·»åŠ å®¾å®¢ï¼šè‡ªåŠ¨åˆ›å»ºæ”¶ç¤¼è®°å½•
- ç¼–è¾‘ä¿¡æ¯ï¼šç¤¼è–„å’Œè®°å½•åŒå‘åŒæ­¥
- å¯¼å‡ºåŠŸèƒ½ï¼šå¯¼å‡ºä¸ºæ–‡æœ¬æ ¼å¼

#### 3. ç»Ÿè®¡åˆ†æ
- å¹´ä»½ç»Ÿè®¡ï¼šæŸ¥çœ‹å„å¹´åº¦æ”¶æ”¯æƒ…å†µ
- äº‹ç”±ç»Ÿè®¡ï¼šåˆ†ç±»ç»Ÿè®¡å„ç±»äº‹ç”±
- æ”¶æ”¯æ˜ç»†ï¼šè¯¦ç»†çš„æ”¶æ”¯è®°å½•

### å¯†ç ç®¡ç†

#### ä¿®æ”¹å¯†ç 
1. åœ¨ç™»å½•é¡µç‚¹å‡»"ä¿®æ”¹å¯†ç "
2. è¾“å…¥æ—§å¯†ç å’Œæ–°å¯†ç 
3. ç¡®è®¤åè¿”å›ç™»å½•é¡µ

#### å¿˜è®°å¯†ç 
å¦‚æœå¿˜è®°å¯†ç ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼é‡ç½®ï¼š

**æ–¹æ³•1: æ¸…é™¤æµè§ˆå™¨æ•°æ®**
```javascript
// æµè§ˆå™¨æ§åˆ¶å°(F12)æ‰§è¡Œï¼š
localStorage.removeItem('renqing-password');
localStorage.removeItem('renqing-first-time');
// åˆ·æ–°é¡µé¢ï¼Œå¯†ç é‡ç½®ä¸º admin
```

---

## ğŸ”§ é«˜çº§é…ç½®

### ç«¯å£é…ç½®

ä¿®æ”¹ç«¯å£ï¼ˆç¼–è¾‘ docker-compose.ymlï¼‰ï¼š
```yaml
ports:
  - "8080:3000"  # å°† 3000 æ”¹ä¸ºä½ æƒ³è¦çš„ç«¯å£
```

### æ•°æ®ç›®å½•

æ•°æ®å­˜å‚¨åœ¨æŒ‚è½½çš„å·ä¸­ï¼š
- `liji.db` - SQLite3 æ•°æ®åº“æ–‡ä»¶ï¼ˆåŒ…å«æ‰€æœ‰è®°å½•ã€ç¤¼è–„å’Œå¯†ç ï¼‰

### ç¯å¢ƒå˜é‡

åœ¨ docker-compose.yml ä¸­é…ç½®ï¼š
- `NODE_ENV`: è¿è¡Œç¯å¢ƒï¼ˆproductionï¼‰
- `PORT`: åº”ç”¨ç«¯å£ï¼ˆ3000ï¼‰
- `DATA_DIR`: æ•°æ®å­˜å‚¨ç›®å½•ï¼ˆ/app/dataï¼‰

---

## ğŸ”„ å‡çº§ä¸ç»´æŠ¤

### å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬

```bash
# åœæ­¢å®¹å™¨
docker-compose down

# æ‹‰å–æœ€æ–°é•œåƒ
docker-compose pull

# é‡æ–°å¯åŠ¨
docker-compose up -d
```

### æ•°æ®å¤‡ä»½

```bash
# å¤‡ä»½æ•°æ®
tar -czf renqing-backup-$(date +%Y%m%d).tar.gz ./data

# æ¢å¤æ•°æ®
tar -xzf renqing-backup-20231207.tar.gz -C .
```

---

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

### æŸ¥çœ‹æ—¥å¿—

```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹æœ€è¿‘100è¡Œ
docker-compose logs --tail 100
```

### ç›‘æ§å®¹å™¨çŠ¶æ€

```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats liji
```

---

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç **: é¦–æ¬¡ç™»å½•ååŠ¡å¿…ä¿®æ”¹ admin å¯†ç 
2. **é™åˆ¶ç½‘ç»œè®¿é—®**: ä½¿ç”¨é˜²ç«å¢™é™åˆ¶è®¿é—®æ¥æº
3. **å®šæœŸå¤‡ä»½**: è®¾ç½®è‡ªåŠ¨å¤‡ä»½ä»»åŠ¡
4. **ç›‘å¬æœ¬åœ°**: å¦‚éå¿…è¦ï¼Œåªç›‘å¬ 127.0.0.1
   ```bash
   ports:
     - "127.0.0.1:3000:3000"
   ```

---

## ğŸ—‘ å¸è½½

```bash
# åœæ­¢å¹¶åˆ é™¤å®¹å™¨
docker-compose down

# åˆ é™¤æ•°æ®ï¼ˆå¯é€‰ï¼Œæ³¨æ„ä¼šæ°¸ä¹…åˆ é™¤æ•°æ®ï¼‰
rm -rf ./data
```

---

## ğŸ’¡ æŠ€æœ¯æ ˆ

### å‰ç«¯
- HTML5
- CSS3 (å“åº”å¼è®¾è®¡)
- JavaScript (åŸç”Ÿï¼Œæ— æ¡†æ¶)

### åç«¯
- Node.js 18
- Express.js
- Body-parser

### æ•°æ®åº“
- **SQLite3** - è½»é‡çº§åµŒå…¥å¼æ•°æ®åº“
- **better-sqlite3** - Node.js é«˜æ€§èƒ½ SQLite3 é©±åŠ¨
- æ•°æ®æŒä¹…åŒ–åˆ° `/app/data/liji.db`
- æ”¯æŒäº‹åŠ¡æ“ä½œï¼Œæ•°æ®å®‰å…¨å¯é 

### å®¹å™¨åŒ–
- Docker
- Docker Compose
- Alpine Linux åŸºç¡€é•œåƒ

---

## ğŸ–¥ï¸ å¤šå¹³å°ç¼–è¯‘æ”¯æŒ

æœ¬é¡¹ç›®ä½¿ç”¨ `better-sqlite3` ä½œä¸º SQLite3 çš„ Node.js é©±åŠ¨ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸç”Ÿ C++ æ¨¡å—ï¼Œéœ€è¦åœ¨ç›®æ ‡å¹³å°ä¸Šè¿›è¡Œç¼–è¯‘ã€‚

### æ”¯æŒçš„æ¶æ„

- **amd64** (x86_64) - ä¸»æµæœåŠ¡å™¨å’Œæ¡Œé¢å¹³å°
- **arm64** (aarch64) - Apple Silicon (M1/M2/M3)ã€ARM æœåŠ¡å™¨

### æœ¬åœ°æ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/smc326/-LiJi-.git   åŸä½œè€…https://github.com/zsw01442/-LiJi-.git 
cd -LiJi-

# å®‰è£…ä¾èµ–ï¼ˆä¼šè‡ªåŠ¨ç¼–è¯‘ better-sqlite3ï¼‰
npm install

# å¯åŠ¨åº”ç”¨
npm start
```

### Docker å¤šå¹³å°æ„å»º

```bash
# åˆ›å»º buildx æ„å»ºå™¨
docker buildx create --name multiarch --use
docker buildx inspect --bootstrap

# å¤šå¹³å°æ„å»ºå¹¶æ¨é€
docker buildx build \
  --platform linux/amd64,linux/arm64 \
  -t smc326/liji:latest \
  --push .
```

### å¸¸è§é—®é¢˜

#### better-sqlite3 ç¼–è¯‘å¤±è´¥

å¦‚æœåœ¨æŸäº›å¹³å°ä¸Šé‡åˆ°ç¼–è¯‘é”™è¯¯ï¼Œè¯·ç¡®ä¿å®‰è£…äº†ä»¥ä¸‹ä¾èµ–ï¼š

**Ubuntu/Debian:**
```bash
sudo apt-get install build-essential python3
```

**Alpine Linux (Docker):**
```dockerfile
RUN apk add --no-cache python3 make g++
```

**macOS:**
```bash
xcode-select --install
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **Docker Hub**: [zsw01442/liji](https://hub.docker.com/r/zsw01442/liji)

---

## ğŸ“„ è®¸å¯è¯

MIT License